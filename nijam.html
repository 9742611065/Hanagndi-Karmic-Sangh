<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hanagandi Karmic Sang - Union Management</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
        .required::after { content: " *"; color: red; }
        .view-section { display: none; }
        .view-section.active { display: block; }
        #member-details-modal.edit-mode .detail-value { display: none; }
        #member-details-modal.edit-mode .edit-input { display: block; }
        .edit-input { display: none; }
        
        @media print {
            body.printing > *:not(.print-container) { display: none; }
            body.printing .print-container { display: block; position: absolute; top: 0; left: 0; width: 100%; }
        }
        
        /* Custom ID card size */
        .id-card-container {
            width: 350px;
            height: 220px;
            transform: scale(1.2);
            transform-origin: top left;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 antialiased font-sans">

    <!-- PRE-LOGIN VIEW -->
    <div id="pre-login-view">
        <header class="bg-white shadow-md"><nav class="container mx-auto px-6 py-4 flex justify-between items-center"><div><h1 class="text-xl md:text-2xl font-bold text-blue-800">Hanagandi Karmic Sang</h1><p class="text-sm text-gray-600">[ಹನಗಂಡಿ ಕಟ್ಟಡ ಮತ್ತು ಇತರೆ ನಿರ್ಮಾಣ ಕಾರ್ಮಿಕ ಸಂಘ]</p></div><div class="flex items-center space-x-4"><div class="text-right"><p class="font-semibold text-green-600 flex items-center"><i class="fa-solid fa-phone mr-2"></i>Helpline</p><a href="tel:9742611065" class="font-bold text-lg">9742611065</a></div><button id="show-login-modal-btn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-semibold"><i class="fa-solid fa-right-to-bracket mr-2"></i>Admin Login</button></div></nav></header>
        <main class="container mx-auto px-6 py-12 text-center">
            <h2 class="text-4xl md:text-5xl font-extrabold text-gray-800 mb-4">Empowering Construction Workers</h2><p class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto mb-8">Join our union to secure your rights, get support, and be part of a strong community.</p>
            <button id="show-registration-modal-btn" class="bg-green-600 text-white px-8 py-4 rounded-full hover:bg-green-700 text-lg font-bold"><i class="fa-solid fa-user-plus mr-2"></i> Register for Membership</button>
            <div class="mt-16 bg-white p-8 rounded-lg shadow-md max-w-2xl mx-auto">
                <h3 class="text-2xl font-bold mb-4">Check Application Status</h3>
                <div class="flex gap-2"><input type="text" id="status-check-input" placeholder="Enter Your Registration ID..." class="w-full p-3 border rounded-lg"><button id="status-check-btn" class="bg-indigo-600 text-white px-6 rounded-lg font-semibold hover:bg-indigo-700">Check</button></div>
            </div>
        </main>
    </div>

    <!-- POST-LOGIN ADMIN DASHBOARD -->
    <div id="post-login-view" class="hidden">
        <div class="flex h-screen bg-gray-100">
            <aside class="w-64 bg-gray-800 text-white flex flex-col"><div class="px-6 py-4 border-b border-gray-700"><h1 class="text-xl font-bold">Admin Panel</h1></div>
                <nav class="flex-1 px-4 py-4 space-y-2" id="sidebar-nav">
                    <a href="#" data-view="dashboard" class="nav-link flex items-center px-4 py-2 rounded-md bg-gray-700"><i class="fa-solid fa-tachometer-alt mr-3"></i>Dashboard</a>
                    <a href="#" data-view="members-list" class="nav-link flex items-center px-4 py-2 rounded-md hover:bg-gray-700"><i class="fa-solid fa-users mr-3"></i>Members List</a>
                    <a href="#" data-view="pending-list" class="nav-link flex items-center px-4 py-2 rounded-md hover:bg-gray-700"><i class="fa-solid fa-user-clock mr-3"></i>Pending List</a>
                    <a href="#" data-view="renewal-list" class="nav-link flex items-center px-4 py-2 rounded-md hover:bg-gray-700"><i class="fa-solid fa-calendar-day mr-3"></i>Renewal List</a>
                    <a href="#" id="sidebar-id-card-btn" class="nav-link flex items-center px-4 py-2 rounded-md hover:bg-gray-700"><i class="fa-solid fa-id-card mr-3"></i>ID Card Generator</a>
                    <a href="#" id="sidebar-receipt-btn" class="nav-link flex items-center px-4 py-2 rounded-md hover:bg-gray-700"><i class="fa-solid fa-receipt mr-3"></i>Receipt Generator</a>
                    <a href="#" id="sidebar-payment-btn" class="nav-link flex items-center px-4 py-2 rounded-md hover:bg-gray-700"><i class="fa-solid fa-money-bill-wave mr-3"></i>Payment Records</a>
                </nav>
                <div class="px-6 py-4 border-t border-gray-700"><button id="logout-btn" class="w-full bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 font-semibold flex items-center justify-center"><i class="fa-solid fa-right-from-bracket mr-2"></i>Logout</button></div>
            </aside>
            <main class="flex-1 p-6 md:p-8 overflow-y-auto">
                <div id="dashboard-view" class="view-section active">
                    <h1 class="text-3xl font-bold mb-6">Dashboard</h1>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-xl shadow-md"><div><p>Total Members</p><p id="total-members-stat" class="text-3xl font-bold text-blue-600">0</p></div></div>
                        <div class="bg-white p-6 rounded-xl shadow-md"><div><p>Renewals Due (60 Days)</p><p id="renewals-due-stat" class="text-3xl font-bold text-orange-500">0</p></div></div>
                        <div class="bg-white p-6 rounded-xl shadow-md"><div><p>Pending Approvals</p><p id="pending-approvals-stat" class="text-3xl font-bold text-yellow-500">0</p></div></div>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white p-6 rounded-xl shadow-md"><h3 class="text-lg font-semibold mb-4">Pending Approvals (Recent 5)</h3><div class="overflow-x-auto"><table class="w-full text-left"><thead><tr><th>Name</th><th>Date</th><th class="text-center">Actions</th></tr></thead><tbody id="pending-approvals-table"></tbody></table><p id="no-pending-approvals" class="text-center text-gray-500 py-4 hidden">No pending approvals.</p></div></div>
                        <div class="bg-white p-6 rounded-xl shadow-md flex flex-col justify-center items-center"><h3 class="text-lg font-semibold mb-4">Quick Actions</h3><button id="dashboard-add-member-btn" class="w-full flex items-center justify-center bg-green-500 text-white px-4 py-3 rounded-lg text-lg"><i class="fa-solid fa-user-plus mr-3"></i>Add New Member</button></div>
                    </div>
                </div>
                <div id="members-list-view" class="view-section"></div><div id="pending-list-view" class="view-section"></div><div id="renewal-list-view" class="view-section"></div>
                <div id="payment-records-view" class="view-section"></div>
            </main>
        </div>
    </div>
    
    <div id="modal-container"></div>
    <div class="print-container"></div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const { jsPDF } = window.jspdf;
        let db = { members: [], receipts: [], payments: [] };

        const saveData = () => localStorage.setItem('karmicSangDb', JSON.stringify(db));
        const loadData = () => { 
            const data = localStorage.getItem('karmicSangDb'); 
            db = data ? JSON.parse(data) : { members: [], receipts: [], payments: [] }; 
        };
        
        const preLoginView = document.getElementById('pre-login-view');
        const postLoginView = document.getElementById('post-login-view');
        const modalContainer = document.getElementById('modal-container');

        const createModal = (id, title, content, maxWidth = 'max-w-md') => `<div id="${id}" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50"><div class="bg-white rounded-xl shadow-2xl p-6 md:p-8 w-full ${maxWidth} max-h-[90vh] overflow-y-auto"><div class="flex justify-between items-center mb-6"><h2 class="text-2xl font-bold">${title}</h2><button class="close-modal-btn text-gray-500 text-3xl">&times;</button></div>${content}</div></div>`;
        const renderAll = () => { renderDashboard(); renderMembersList(); renderPendingList(); renderRenewalList(); renderPaymentRecords(); };
        
        const renderDashboard = () => {
            const approved = db.members.filter(m => m.status === 'approved'); 
            const pending = db.members.filter(m => m.status === 'pending');
            const sixtyDays = new Date(); 
            sixtyDays.setDate(sixtyDays.getDate() + 60); 
            const renewals = approved.filter(m => new Date(m.renewalDate) <= sixtyDays);
            
            document.getElementById('total-members-stat').textContent = approved.length; 
            document.getElementById('pending-approvals-stat').textContent = pending.length; 
            document.getElementById('renewals-due-stat').textContent = renewals.length;
            
            const pendingTable = document.getElementById('pending-approvals-table'); 
            pendingTable.innerHTML = '';
            document.getElementById('no-pending-approvals').classList.toggle('hidden', pending.length > 0);
            
            if (pending.length > 0) { 
                pending.slice(0, 5).forEach(m => { 
                    pendingTable.innerHTML += `
                        <tr class="border-b">
                            <td class="p-3">${m.fullName}</td>
                            <td class="p-3">${new Date(m.registrationDate).toLocaleDateString()}</td>
                            <td class="p-3 text-center space-x-2">
                                <button data-id="${m.id}" class="action-approve bg-green-500 text-white px-2 py-1 rounded text-sm">Approve</button>
                                <button data-id="${m.id}" class="action-reject bg-red-500 text-white px-2 py-1 rounded text-sm">Reject</button>
                            </td>
                        </tr>`; 
                }); 
            }
        };
        
        const createListView = (id, title, members, noDataText, isRenewal = false) => {
            const tableBody = members.map(member => {
                let actionButtons = `
                    <button data-id="${member.id}" class="action-view bg-blue-500 text-white px-3 py-1 rounded-md text-sm">
                        <i class="fa-solid fa-eye"></i>
                    </button>`;
                
                if (isRenewal) {
                    actionButtons += `
                        <button data-id="${member.id}" class="action-renew bg-green-500 text-white px-3 py-1 rounded-md text-sm ml-2">
                            <i class="fa-solid fa-arrows-rotate"></i>
                        </button>`;
                }
                
                actionButtons += `
                    <button data-id="${member.id}" class="action-delete bg-red-500 text-white px-3 py-1 rounded-md text-sm ml-2">
                        <i class="fa-solid fa-trash"></i>
                    </button>`;
                
                return `
                    <tr class="border-b">
                        <td class="p-3">${member.id}</td>
                        <td class="p-3">${member.fullName}</td>
                        <td class="p-3">${member.mobile}</td>
                        <td class="p-3">${new Date(member.renewalDate).toLocaleDateString()}</td>
                        <td class="p-3 text-center">${actionButtons}</td>
                    </tr>`;
            }).join('');
            
            document.getElementById(`${id}-view`).innerHTML = `
                <h1 class="text-3xl font-bold mb-6">${title}</h1>
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <input type="text" id="${id}-search" class="w-full p-2 border rounded mb-4" placeholder="Search by ID, Name, or Mobile...">
                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead>
                                <tr>
                                    <th class="p-3">ID</th>
                                    <th class="p-3">Name</th>
                                    <th class="p-3">Mobile</th>
                                    <th class="p-3">Renewal Date</th>
                                    <th class="p-3 text-center">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${tableBody || `<tr><td colspan="5" class="text-center text-gray-500 py-4">${noDataText}</td></tr>`}
                            </tbody>
                        </table>
                    </div>
                </div>`;
            
            document.getElementById(`${id}-search`).addEventListener('input', e => {
                const term = e.target.value.toLowerCase();
                const filtered = members.filter(m => 
                    m.id.toLowerCase().includes(term) || 
                    m.fullName.toLowerCase().includes(term) || 
                    m.mobile.includes(term)
                );
                createListView(id, title, filtered, noDataText, isRenewal);
            });
        };
        
        const renderMembersList = () => createListView('members-list', 'Approved Members List', db.members.filter(m => m.status === 'approved'), 'No approved members found.');
        const renderPendingList = () => createListView('pending-list', 'Pending Members List', db.members.filter(m => m.status === 'pending'), 'No pending members.');
        const renderRenewalList = () => { 
            const sixtyDays = new Date(); 
            sixtyDays.setDate(sixtyDays.getDate() + 60); 
            const renewals = db.members.filter(m => m.status === 'approved' && new Date(m.renewalDate) <= sixtyDays); 
            createListView('renewal-list', 'Renewals Due (Next 60 Days)', renewals, 'No renewals due.', true); 
        };
        
        const renderPaymentRecords = () => {
            const payments = db.payments;
            const tableBody = payments.map(payment => {
                const member = db.members.find(m => m.id === payment.memberId) || {};
                return `
                    <tr class="border-b">
                        <td class="p-3">${payment.id}</td>
                        <td class="p-3">${member.fullName || 'N/A'}</td>
                        <td class="p-3">₹${payment.amount}</td>
                        <td class="p-3">${payment.type}</td>
                        <td class="p-3">${new Date(payment.date).toLocaleDateString()}</td>
                        <td class="p-3 text-center">
                            <button data-id="${payment.id}" class="action-view-receipt bg-blue-500 text-white px-3 py-1 rounded-md text-sm">
                                <i class="fa-solid fa-receipt"></i>
                            </button>
                            <button data-id="${payment.id}" class="action-delete bg-red-500 text-white px-3 py-1 rounded-md text-sm ml-2">
                                <i class="fa-solid fa-trash"></i>
                            </button>
                        </td>
                    </tr>`;
            }).join('');
            
            document.getElementById('payment-records-view').innerHTML = `
                <h1 class="text-3xl font-bold mb-6">Payment Records</h1>
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead>
                                <tr>
                                    <th class="p-3">Receipt No.</th>
                                    <th class="p-3">Member</th>
                                    <th class="p-3">Amount</th>
                                    <th class="p-3">Type</th>
                                    <th class="p-3">Date</th>
                                    <th class="p-3 text-center">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${tableBody || `<tr><td colspan="6" class="text-center text-gray-500 py-4">No payment records found.</td></tr>`}
                            </tbody>
                        </table>
                    </div>
                </div>`;
        };
        
        const switchView = (viewId) => {
            document.querySelectorAll('.view-section').forEach(v => v.classList.remove('active'));
            document.getElementById(`${viewId}-view`).classList.add('active');
            document.querySelectorAll('#sidebar-nav .nav-link').forEach(l => l.classList.remove('bg-gray-700'));
            document.querySelector(`#sidebar-nav .nav-link[data-view="${viewId}"]`)?.classList.add('bg-gray-700');
        };
        
        const openModal = (id) => document.getElementById(id)?.classList.remove('hidden');
        const closeModal = (id) => document.getElementById(id)?.classList.add('hidden');
        const findMember = (term) => term ? db.members.find(m => (m.id.toLowerCase() === term.toLowerCase()) || m.fullName.toLowerCase().includes(term.toLowerCase()) || m.mobile.includes(term)) : null;

        const createAcknowledgementReceiptHTML = (member) => {
            return `
            <div class="border-2 border-gray-700 p-6 font-serif bg-white w-full max-w-2xl mx-auto">
                <div class="text-center mb-6">
                    <div class="flex justify-center mb-2">
                        <div class="bg-gray-800 text-white px-8 py-2 rounded-t">
                            <h3 class="font-bold text-lg">Hanagandi Karmic Sang</h3>
                            <p class="text-xs">[ಹನಗಂಡಿ ಕಟ್ಟಡ ಮತ್ತು ಇತರೆ ನಿರ್ಮಾಣ ಕಾರ್ಮಿಕ ಸಂಘ]</p>
                        </div>
                    </div>
                    <h4 class="font-bold text-xl text-blue-800">MEMBERSHIP REGISTRATION ACKNOWLEDGEMENT</h4>
                    <div class="w-32 h-1 bg-orange-500 mx-auto mt-2"></div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <div class="flex justify-between mb-2 text-sm">
                            <span class="font-bold">Registration No.:</span>
                            <span>${member.id}</span>
                        </div>
                        <div class="flex justify-between mb-2 text-sm">
                            <span class="font-bold">Form Date:</span>
                            <span>${new Date(member.registrationDate).toLocaleDateString()}</span>
                        </div>
                        <div class="flex justify-between mb-2 text-sm">
                            <span class="font-bold">Status:</span>
                            <span class="font-bold text-orange-600">PENDING FOR APPROVAL</span>
                        </div>
                    </div>
                    <div class="flex justify-center">
                        <img src="${member.photoData || 'https://via.placeholder.com/100x120?text=Photo'}" class="w-24 h-32 border-2 object-cover">
                    </div>
                </div>
                
                <div class="border-t-2 border-gray-300 pt-4">
                    <h5 class="font-bold text-lg mb-3">Member Details</h5>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                        <div>
                            <p><span class="font-bold">Name:</span> ${member.fullName}</p>
                            <p><span class="font-bold">Father/Husband:</span> ${member.fatherHusbandName || '-'}</p>
                            <p><span class="font-bold">DOB:</span> ${new Date(member.dob).toLocaleDateString()}</p>
                            <p><span class="font-bold">Mobile:</span> ${member.mobile}</p>
                        </div>
                        <div>
                            <p><span class="font-bold">Aadhaar:</span> ${member.aadhaar}</p>
                            <p><span class="font-bold">Work Type:</span> ${member.workType}</p>
                            <p><span class="font-bold">Address:</span> ${member.address.substring(0, 30)}${member.address.length > 30 ? '...' : ''}</p>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 text-center border-t-2 border-gray-300 pt-4">
                    <div class="flex justify-around">
                        <div class="text-center">
                            <p class="font-bold">Applicant Signature</p>
                            <div class="h-12 w-32 border-b border-black mx-auto"></div>
                        </div>
                        <div class="text-center">
                            <p class="font-bold">Union Authority</p>
                            <div class="h-12 w-32 border-b border-black mx-auto"></div>
                        </div>
                    </div>
                    <p class="mt-4 text-xs text-gray-600">This is an acknowledgement of your registration. Please keep this receipt for future reference.</p>
                </div>
            </div>`;
        };

        const createPaymentReceiptHTML = (payment, member) => {
            return `
            <div class="border-2 border-gray-700 p-6 font-serif bg-white w-full max-w-2xl mx-auto">
                <div class="text-center mb-6">
                    <div class="flex justify-center mb-2">
                        <div class="bg-gray-800 text-white px-8 py-2 rounded-t">
                            <h3 class="font-bold text-lg">Hanagandi Karmic Sang</h3>
                            <p class="text-xs">[ಹನಗಂಡಿ ಕಟ್ಟಡ ಮತ್ತು ಇತರೆ ನಿರ್ಮಾಣ ಕಾರ್ಮಿಕ ಸಂಘ]</p>
                        </div>
                    </div>
                    <h4 class="font-bold text-xl text-blue-800">PAYMENT RECEIPT</h4>
                    <div class="w-32 h-1 bg-green-500 mx-auto mt-2"></div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <div class="flex justify-between mb-2 text-sm">
                            <span class="font-bold">Receipt No.:</span>
                            <span>${payment.id}</span>
                        </div>
                        <div class="flex justify-between mb-2 text-sm">
                            <span class="font-bold">Payment Date:</span>
                            <span>${new Date(payment.date).toLocaleDateString()}</span>
                        </div>
                        <div class="flex justify-between mb-2 text-sm">
                            <span class="font-bold">Payment Type:</span>
                            <span>${payment.type}</span>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between mb-2 text-sm">
                            <span class="font-bold">Member ID:</span>
                            <span>${member.id}</span>
                        </div>
                        <div class="flex justify-between mb-2 text-sm">
                            <span class="font-bold">Member Name:</span>
                            <span>${member.fullName}</span>
                        </div>
                    </div>
                </div>
                
                <div class="border-2 border-gray-300 p-4 rounded-lg">
                    <div class="flex justify-between text-lg font-bold">
                        <span>Amount Paid:</span>
                        <span>₹${payment.amount}</span>
                    </div>
                    <div class="mt-2 text-sm">
                        <p><span class="font-bold">Amount in Words:</span> ${payment.amountInWords}</p>
                    </div>
                </div>
                
                <div class="mt-6 text-center border-t-2 border-gray-300 pt-4">
                    <div class="flex justify-around">
                        <div class="text-center">
                            <p class="font-bold">Member Signature</p>
                            <div class="h-12 w-32 border-b border-black mx-auto"></div>
                        </div>
                        <div class="text-center">
                            <p class="font-bold">Cashier Signature</p>
                            <div class="h-12 w-32 border-b border-black mx-auto"></div>
                        </div>
                    </div>
                    <p class="mt-4 text-xs text-gray-600">This receipt is proof of payment made to the union. Please keep it for your records.</p>
                </div>
            </div>`;
        };

        const renderModals = () => {
            modalContainer.innerHTML = createModal('login-modal', 'Admin Login', `...`);
            modalContainer.innerHTML += createModal('registration-modal', 'New Member Registration', `...`, 'max-w-4xl');
            modalContainer.innerHTML += createModal('id-card-modal', 'ID Card Generator', `...`, 'max-w-lg');
            modalContainer.innerHTML += createModal('receipt-modal', 'Receipt Generator', `...`, 'max-w-2xl');
            modalContainer.innerHTML += createModal('member-details-modal', 'Member Details', `...`, 'max-w-2xl');
            modalContainer.innerHTML += createModal('acknowledgement-receipt-modal', 'Registration Acknowledgement', `...`, 'max-w-2xl');
            modalContainer.innerHTML += createModal('status-check-modal', 'Application Status', `...`);
            modalContainer.innerHTML += createModal('payment-modal', 'Record Payment', `...`, 'max-w-md');
            modalContainer.innerHTML += createModal('payment-receipt-modal', 'Payment Receipt', `...`, 'max-w-2xl');
        };
        
        const handlePrintOrDownload = (elementId, isDownload, fileName) => {
            const element = document.getElementById(elementId);
            if(!element) { console.error("Element not found for print/download:", elementId); return; }
            html2canvas(element, { scale: 2 }).then(canvas => {
                if (isDownload) {
                    const imgData = canvas.toDataURL('image/png');
                    const pdf = new jsPDF('p', 'mm', 'a4');
                    const pdfWidth = pdf.internal.pageSize.getWidth();
                    const pdfHeight = (canvas.height * pdfWidth) / canvas.width;
                    pdf.addImage(imgData, 'PNG', 10, 10, pdfWidth - 20, pdfHeight - 20);
                    pdf.save(`${fileName}.pdf`);
                } else {
                    document.querySelector('.print-container').innerHTML = `<img src="${canvas.toDataURL('image/png')}" style="width:100%;">`;
                    document.body.classList.add('printing');
                    window.print();
                    document.body.classList.remove('printing');
                    document.querySelector('.print-container').innerHTML = '';
                }
            });
        };

        const showMemberDetails = (memberId) => {
            const member = db.members.find(m => m.id === memberId);
            if (!member) return;
            
            const modalContent = `
                <div class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="md:col-span-2">
                            <h3 class="text-xl font-bold">${member.fullName}</h3>
                            <p class="text-gray-600">ID: ${member.id}</p>
                            <div class="mt-2">
                                <p><strong>Status:</strong> <span class="${member.status === 'approved' ? 'text-green-600' : 'text-orange-500'} font-bold">${member.status.toUpperCase()}</span></p>
                                <p><strong>Registration Date:</strong> ${new Date(member.registrationDate).toLocaleDateString()}</p>
                                <p><strong>Renewal Date:</strong> ${new Date(member.renewalDate).toLocaleDateString()}</p>
                            </div>
                        </div>
                        <div class="flex justify-center">
                            <img src="${member.photoData || 'https://via.placeholder.com/120x150?text=Photo'}" class="w-32 h-40 border object-cover">
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <h4 class="font-bold border-b pb-1">Personal Details</h4>
                            <p><strong>Father/Husband:</strong> ${member.fatherHusbandName || '-'}</p>
                            <p><strong>DOB:</strong> ${new Date(member.dob).toLocaleDateString()}</p>
                            <p><strong>Gender:</strong> ${member.gender || '-'}</p>
                            <p><strong>Mobile:</strong> ${member.mobile}</p>
                            <p><strong>Emergency Contact:</strong> ${member.emergencyContact || '-'}</p>
                        </div>
                        <div>
                            <h4 class="font-bold border-b pb-1">Work Details</h4>
                            <p><strong>Work Type:</strong> ${member.workType}</p>
                            <p><strong>Experience:</strong> ${member.experience || '-'} years</p>
                            <p><strong>Aadhaar:</strong> ${member.aadhaar}</p>
                            <p><strong>Religion/Caste:</strong> ${member.religionCaste || '-'}</p>
                            <p><strong>Blood Group:</strong> ${member.bloodGroup || '-'}</p>
                        </div>
                    </div>
                    
                    <div class="mt-2">
                        <h4 class="font-bold border-b pb-1">Address</h4>
                        <p>${member.address}</p>
                    </div>
                    
                    <div class="mt-4 flex justify-end space-x-2">
                        ${member.status === 'approved' ? `
                        <button id="record-payment-btn" class="bg-green-600 text-white px-4 py-2 rounded-lg">
                            <i class="fa-solid fa-money-bill-wave mr-2"></i>Record Payment
                        </button>
                        <button id="generate-id-card-btn" class="bg-blue-600 text-white px-4 py-2 rounded-lg">
                            <i class="fa-solid fa-id-card mr-2"></i>Generate ID Card
                        </button>
                        ` : ''}
                        <button id="close-member-details" class="bg-gray-600 text-white px-4 py-2 rounded-lg">
                            Close
                        </button>
                    </div>
                </div>`;
            
            const modal = document.getElementById('member-details-modal');
            modal.querySelector('.bg-white').innerHTML = `
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">Member Details</h2>
                    <button class="close-modal-btn text-gray-500 text-3xl">&times;</button>
                </div>
                ${modalContent}`;
                
            openModal('member-details-modal');
            
            // Add event listeners for buttons in the modal
            document.getElementById('close-member-details')?.addEventListener('click', () => closeModal('member-details-modal'));
            
            document.getElementById('generate-id-card-btn')?.addEventListener('click', () => {
                closeModal('member-details-modal');
                document.getElementById('id-card-search-input').value = member.id;
                document.getElementById('id-card-search-btn').click();
                openModal('id-card-modal');
            });
            
            document.getElementById('record-payment-btn')?.addEventListener('click', () => {
                closeModal('member-details-modal');
                document.getElementById('payment-member-id').value = member.id;
                document.getElementById('payment-member-name').value = member.fullName;
                openModal('payment-modal');
            });
        };

        document.body.addEventListener('click', e => {
            const target = e.target.closest('button, a'); 
            if (!target) return;
            
            const openActionMap = {
                'show-login-modal-btn': 'login-modal', 
                'show-registration-modal-btn': 'registration-modal', 
                'dashboard-add-member-btn': 'registration-modal', 
                'sidebar-id-card-btn': 'id-card-modal', 
                'sidebar-receipt-btn': 'receipt-modal',
                'sidebar-payment-btn': 'payment-records-view'
            };
            
            if(openActionMap[target.id]) { 
                e.preventDefault(); 
                if (openActionMap[target.id] === 'payment-records-view') {
                    switchView('payment-records');
                } else {
                    openModal(openActionMap[target.id]); 
                }
            }

            if (target.classList.contains('close-modal-btn')) closeModal(target.closest('.fixed').id);
            if (target.closest('.nav-link') && target.dataset.view) { e.preventDefault(); switchView(target.dataset.view); }
            
            // Action buttons handling
            if (target.classList.contains('action-approve')) { 
                const id = target.dataset.id; 
                const member = db.members.find(m => m.id === id); 
                if(member) { 
                    member.status = 'approved'; 
                    saveData(); 
                    renderAll(); 
                } 
            }
            
            if (target.classList.contains('action-reject')) { 
                const id = target.dataset.id; 
                if(confirm(`Reject member ${id}?`)) { 
                    db.members = db.members.filter(m => m.id !== id); 
                    saveData(); 
                    renderAll(); 
                } 
            }
            
            if (target.classList.contains('action-delete')) { 
                const id = target.dataset.id; 
                if(confirm(`Delete member ${id}?`)) { 
                    db.members = db.members.filter(m => m.id !== id); 
                    saveData(); 
                    renderAll(); 
                } 
            }
            
            if (target.classList.contains('action-renew')) { 
                const id = target.dataset.id; 
                if(confirm(`Renew membership for ${id}?`)){ 
                    const member = db.members.find(m => m.id === id); 
                    if(member){ 
                        const newDate = new Date(member.renewalDate); 
                        newDate.setFullYear(newDate.getFullYear() + 1); 
                        member.renewalDate = newDate.toISOString(); 
                        saveData(); 
                        alert('Membership renewed successfully!'); 
                        renderAll(); 
                    } 
                } 
            }
            
            if (target.classList.contains('action-view')) {
                const memberId = target.dataset.id;
                showMemberDetails(memberId);
            }
            
            if (target.id === 'status-check-btn') {
                const term = document.getElementById('status-check-input').value;
                const member = db.members.find(m => m.id === term);
                const modal = document.getElementById('status-check-modal');
                let statusContent = `<p class="text-red-500 text-center">No application found with ID: ${term}</p>`;
                if(member) {
                    statusContent = `
                        <div class="text-center">
                            <p><strong>Name:</strong> ${member.fullName}</p>
                            <p class="text-lg font-bold ${member.status === 'approved' ? 'text-green-600' : 'text-orange-500'}">
                                Status: ${member.status.charAt(0).toUpperCase() + member.status.slice(1)}
                            </p>
                        </div>`;
                    if (member.status === 'approved') {
                        statusContent += `
                            <p class="text-center mt-4">You can now get your ID card.</p>
                            <div id="status-id-card-preview" class="mt-4 flex flex-col items-center">
                                <div class="id-card-container">
                                    ${document.getElementById('id-card-design-template')?.innerHTML
                                        .replace('{{MEMBER_ID}}', member.id)
                                        .replace('{{PHOTO}}', member.photoData || 'https://via.placeholder.com/100x120?text=Photo')
                                        .replace('{{NAME}}', member.fullName)
                                        .replace('{{WORK}}', member.workType)
                                        .replace('{{MOBILE}}', member.mobile)
                                        .replace('{{VALIDTILL}}', new Date(member.renewalDate).toLocaleDateString())
                                    }
                                </div>
                                <div class="mt-4 flex justify-end space-x-2">
                                    <button data-id="status-id-card-design" class="action-print bg-gray-600 text-white px-4 py-2 rounded-lg">Print ID</button>
                                    <button data-id="status-id-card-design" class="action-download bg-blue-600 text-white px-4 py-2 rounded-lg">Download ID</button>
                                </div>
                            </div>`;
                    }
                }
                modal.querySelector('.bg-white').innerHTML = `
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Application Status</h2>
                        <button class="close-modal-btn text-gray-500 text-3xl">&times;</button>
                    </div>
                    ${statusContent}`;
                openModal('status-check-modal');
            }
            
            if (target.id === 'id-card-search-btn') {
                const member = findMember(document.getElementById('id-card-search-input').value);
                const contentDiv = document.getElementById('id-card-content');
                if (member && member.status === 'approved') {
                    const cardHTML = `
                        <div class="flex justify-center">
                            <div class="id-card-container">
                                <div id="id-card-design">
                                    ${document.getElementById('id-card-design-template').innerHTML
                                        .replace('{{MEMBER_ID}}', member.id)
                                        .replace('{{PHOTO}}', member.photoData || 'https://via.placeholder.com/100x120?text=Photo')
                                        .replace('{{NAME}}', member.fullName)
                                        .replace('{{WORK}}', member.workType)
                                        .replace('{{MOBILE}}', member.mobile)
                                        .replace('{{VALIDTILL}}', new Date(member.renewalDate).toLocaleDateString())
                                    }
                                </div>
                            </div>
                        </div>
                        <div class="mt-8 flex justify-end space-x-2">
                            <button data-id="id-card-design" class="action-print bg-gray-600 text-white px-4 py-2 rounded-lg">Print</button>
                            <button data-id="id-card-design" class="action-download bg-blue-600 text-white px-4 py-2 rounded-lg">Download PDF</button>
                        </div>`;
                    contentDiv.innerHTML = cardHTML;
                } else {
                    contentDiv.innerHTML = `<p class="text-red-500 text-center">Approved member not found or not approved.</p>`;
                }
            }
            
            if (target.id === 'receipt-search-btn') {
                const member = findMember(document.getElementById('receipt-search-input').value);
                const contentDiv = document.getElementById('receipt-content');
                if (member) {
                    contentDiv.innerHTML = `
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-xl font-bold mb-4">Generate Receipt for ${member.fullName}</h3>
                            <div class="space-y-4">
                                <button id="generate-registration-receipt" class="w-full bg-blue-600 text-white px-4 py-2 rounded-lg">Registration Receipt</button>
                                <button id="generate-payment-receipt" class="w-full bg-green-600 text-white px-4 py-2 rounded-lg">Payment Receipt</button>
                            </div>
                        </div>`;
                        
                    document.getElementById('generate-registration-receipt').addEventListener('click', () => {
                        const ackModal = document.getElementById('acknowledgement-receipt-modal');
                        ackModal.querySelector('.bg-white').innerHTML = `
                            <div class="flex justify-between items-center mb-6">
                                <h2 class="text-2xl font-bold">Registration Receipt</h2>
                                <button class="close-modal-btn text-gray-500 text-3xl">&times;</button>
                            </div>
                            <div id="ack-receipt">
                                ${createAcknowledgementReceiptHTML(member)}
                            </div>
                            <div class="mt-4 flex justify-end space-x-2">
                                <button data-id="ack-receipt" data-member-id="${member.id}" class="action-print bg-gray-600 text-white px-4 py-2 rounded-lg">Print</button>
                                <button data-id="ack-receipt" data-member-id="${member.id}" class="action-download bg-blue-600 text-white px-4 py-2 rounded-lg">Download PDF</button>
                            </div>`;
                        closeModal('receipt-modal');
                        openModal('acknowledgement-receipt-modal');
                    });
                    
                    document.getElementById('generate-payment-receipt').addEventListener('click', () => {
                        document.getElementById('payment-member-id').value = member.id;
                        document.getElementById('payment-member-name').value = member.fullName;
                        closeModal('receipt-modal');
                        openModal('payment-modal');
                    });
                } else {
                    contentDiv.innerHTML = `<p class="text-red-500 text-center">Member not found.</p>`;
                }
            }
            
            if (target.classList.contains('action-print') || target.classList.contains('action-download')) { 
                handlePrintOrDownload(
                    target.dataset.id, 
                    target.classList.contains('action-download'), 
                    `${target.dataset.id}-${target.dataset.memberId || ''}`
                ); 
            }
            
            if (target.id === 'logout-btn') { 
                if(confirm('Are you sure you want to logout?')) { 
                    postLoginView.classList.add('hidden'); 
                    preLoginView.classList.remove('hidden'); 
                }
            }
            
            if (target.id === 'submit-payment-btn') {
                const memberId = document.getElementById('payment-member-id').value;
                const amount = parseFloat(document.getElementById('payment-amount').value);
                const paymentType = document.getElementById('payment-type').value;
                
                if (!memberId || !amount || amount <= 0) {
                    alert('Please enter valid payment details');
                    return;
                }
                
                const payment = {
                    id: `PYMT-${Date.now()}`,
                    memberId: memberId,
                    amount: amount,
                    type: paymentType,
                    date: new Date().toISOString(),
                    amountInWords: document.getElementById('amount-in-words').value || 'Not specified'
                };
                
                db.payments.push(payment);
                saveData();
                
                const member = db.members.find(m => m.id === memberId);
                const modal = document.getElementById('payment-receipt-modal');
                modal.querySelector('.bg-white').innerHTML = `
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Payment Receipt</h2>
                        <button class="close-modal-btn text-gray-500 text-3xl">&times;</button>
                    </div>
                    <div id="payment-receipt">
                        ${createPaymentReceiptHTML(payment, member)}
                    </div>
                    <div class="mt-4 flex justify-end space-x-2">
                        <button data-id="payment-receipt" class="action-print bg-gray-600 text-white px-4 py-2 rounded-lg">Print</button>
                        <button data-id="payment-receipt" class="action-download bg-blue-600 text-white px-4 py-2 rounded-lg">Download PDF</button>
                    </div>`;
                    
                closeModal('payment-modal');
                openModal('payment-receipt-modal');
            }
            
            if (target.classList.contains('action-view-receipt')) {
                const paymentId = target.dataset.id;
                const payment = db.payments.find(p => p.id === paymentId);
                const member = db.members.find(m => m.id === payment.memberId);
                
                if (payment && member) {
                    const modal = document.getElementById('payment-receipt-modal');
                    modal.querySelector('.bg-white').innerHTML = `
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold">Payment Receipt</h2>
                            <button class="close-modal-btn text-gray-500 text-3xl">&times;</button>
                        </div>
                        <div id="payment-receipt">
                            ${createPaymentReceiptHTML(payment, member)}
                        </div>
                        <div class="mt-4 flex justify-end space-x-2">
                            <button data-id="payment-receipt" class="action-print bg-gray-600 text-white px-4 py-2 rounded-lg">Print</button>
                            <button data-id="payment-receipt" class="action-download bg-blue-600 text-white px-4 py-2 rounded-lg">Download PDF</button>
                        </div>`;
                    openModal('payment-receipt-modal');
                }
            }
        });
        
        document.body.addEventListener('submit', e => {
            e.preventDefault();
            if (e.target.id === 'login-form') {
                const user = document.getElementById('username').value; 
                const pass = document.getElementById('password').value;
                if (user === 'admin' && pass === 'Nijam7najmin@') { 
                    preLoginView.classList.add('hidden'); 
                    postLoginView.classList.remove('hidden'); 
                    closeModal('login-modal'); 
                    renderAll(); 
                } else { 
                    document.getElementById('invalid-login-alert').classList.remove('hidden'); 
                }
            }
            
            if(e.target.id === 'registration-form') {
                const formData = new FormData(e.target);
                const file = formData.get('photo');
                const reader = new FileReader();
                
                reader.onloadend = () => {
                    const newMember = { 
                        id: `KS-${Date.now()}`, 
                        status: 'pending', 
                        photoData: reader.result || 'https://via.placeholder.com/100x120?text=Photo',
                        registrationDate: new Date().toISOString(),
                        renewalDate: new Date(new Date().setFullYear(new Date().getFullYear() + 1)).toISOString()
                    };
                    
                    formData.forEach((value, key) => { 
                        if(key !== 'photo' && key !== 'docs') newMember[key] = value 
                    });
                    
                    newMember.docs = Array.from(formData.getAll('docs'));
                    
                    db.members.push(newMember); 
                    saveData();
                    
                    const ackModal = document.getElementById('acknowledgement-receipt-modal');
                    ackModal.querySelector('.bg-white').innerHTML = `
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold">Registration Submitted</h2>
                            <button class="close-modal-btn text-gray-500 text-3xl">&times;</button>
                        </div>
                        <div id="ack-receipt">
                            ${createAcknowledgementReceiptHTML(newMember)}
                        </div>
                        <div class="mt-4 flex justify-end space-x-2">
                            <button data-id="ack-receipt" data-member-id="${newMember.id}" class="action-print bg-gray-600 text-white px-4 py-2 rounded-lg">Print</button>
                            <button data-id="ack-receipt" data-member-id="${newMember.id}" class="action-download bg-blue-600 text-white px-4 py-2 rounded-lg">Download PDF</button>
                        </div>`;
                    e.target.reset(); 
                    closeModal('registration-modal'); 
                    openModal('acknowledgement-receipt-modal');
                    
                    if (!postLoginView.classList.contains('hidden')) renderAll();
                };
                
                file && file.size > 0 ? reader.readAsDataURL(file) : reader.onloadend();
            }
        });
        
        // Initialize the app
        loadData();
        renderModals();
        
        // Dynamically create modal content
        document.getElementById('login-modal').querySelector('.bg-white').innerHTML = `
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Admin Login</h2>
                <button class="close-modal-btn text-gray-500 text-3xl">&times;</button>
            </div>
            <form id="login-form">
                <div id="invalid-login-alert" class="hidden bg-red-100 p-3 rounded mb-4 text-red-700">Invalid credentials.</div>
                <div class="mb-4">
                    <label>Username</label>
                    <input type="text" id="username" class="w-full p-2 border rounded">
                </div>
                <div class="mb-6">
                    <label>Password</label>
                    <input type="password" id="password" class="w-full p-2 border rounded">
                </div>
                <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded font-semibold">Login</button>
            </form>`;
            
        document.getElementById('registration-modal').querySelector('.bg-white').innerHTML = document.querySelector('#registration-modal-template').innerHTML;
        
        document.getElementById('id-card-modal').querySelector('.bg-white').innerHTML = `
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">ID Card Generator</h2>
                <button class="close-modal-btn text-gray-500 text-3xl">&times;</button>
            </div>
            <div class="flex gap-2 mb-4">
                <input type="text" id="id-card-search-input" placeholder="Search by ID, Name, Mobile..." class="w-full p-2 border rounded">
                <button id="id-card-search-btn" class="bg-blue-600 text-white px-4 rounded">Search</button>
            </div>
            <div id="id-card-content" class="mt-4"></div>`;
        
        document.getElementById('receipt-modal').querySelector('.bg-white').innerHTML = `
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Receipt Generator</h2>
                <button class="close-modal-btn text-gray-500 text-3xl">&times;</button>
            </div>
            <div class="flex gap-2 mb-4">
                <input type="text" id="receipt-search-input" placeholder="Search by ID, Name, Mobile..." class="w-full p-2 border rounded">
                <button id="receipt-search-btn" class="bg-blue-600 text-white px-4 rounded">Search</button>
            </div>
            <div id="receipt-content"></div>`;
        
        document.getElementById('payment-modal').querySelector('.bg-white').innerHTML = `
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Record Payment</h2>
                <button class="close-modal-btn text-gray-500 text-3xl">&times;</button>
            </div>
            <form>
                <div class="mb-4">
                    <label>Member ID</label>
                    <input type="text" id="payment-member-id" class="w-full p-2 border rounded" readonly>
                </div>
                <div class="mb-4">
                    <label>Member Name</label>
                    <input type="text" id="payment-member-name" class="w-full p-2 border rounded" readonly>
                </div>
                <div class="mb-4">
                    <label>Amount (₹)</label>
                    <input type="number" id="payment-amount" class="w-full p-2 border rounded" required>
                </div>
                <div class="mb-4">
                    <label>Amount in Words</label>
                    <input type="text" id="amount-in-words" class="w-full p-2 border rounded">
                </div>
                <div class="mb-4">
                    <label>Payment Type</label>
                    <select id="payment-type" class="w-full p-2 border rounded">
                        <option value="Membership Fee">Membership Fee</option>
                        <option value="Renewal Fee">Renewal Fee</option>
                        <option value="Donation">Donation</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <button type="button" id="submit-payment-btn" class="w-full bg-green-600 text-white py-2 rounded font-semibold">Record Payment</button>
            </form>`;
    });
    </script>
    
    <!-- TEMPLATES FOR DYNAMIC CONTENT -->
    <template id="registration-modal-template">
        <div class="flex justify-between items-start mb-6"><div><h2 class="text-2xl font-bold">New Member Registration</h2></div><button class="close-modal-btn text-gray-500 text-3xl">&times;</button></div>
        <form id="registration-form" class="space-y-4">
            <div class="text-center font-bold text-xl">MEMBERSHIP REGISTRATION FORM</div>
            <div class="grid grid-cols-2 gap-4 border-b pb-2"><div><label>Registration No.:</label><input type="text" name="registrationNo" class="w-full p-1 border rounded text-sm"></div><div class="text-right"><label>Form Date:</label><input type="date" name="formDate" class="p-1 border rounded text-sm" value="${new Date().toISOString().split('T')[0]}"></div></div>
            <div class="grid grid-cols-3 gap-4 border-b pb-4">
                <div class="col-span-2 space-y-2">
                    <div><label class="required text-sm">Name:</label><input type="text" name="fullName" class="w-full p-1 border rounded text-sm" required></div>
                    <div><label class="text-sm">Father's/Husband's Name:</label><input type="text" name="fatherHusbandName" class="w-full p-1 border rounded text-sm"></div>
                    <div class="grid grid-cols-2 gap-4">
                        <div><label class="required text-sm">Date of Birth:</label><input type="date" name="dob" class="w-full p-1 border rounded text-sm" required></div>
                        <div class="flex items-center space-x-2 text-sm"><label>Gender:</label><input type="radio" name="gender" value="Male" checked> Male <input type="radio" name="gender" value="Female"> Female</div>
                    </div>
                    <div><label class="required text-sm">Mobile No.:</label><input type="tel" name="mobile" class="w-full p-1 border rounded text-sm" required></div>
                    <div><label class="text-sm">Emergency Contact:</label><input type="text" name="emergencyContact" class="w-full p-1 border rounded text-sm"></div>
                </div>
                <div class="flex flex-col items-center justify-start pt-4">
                    <div class="w-28 h-36 border-2 flex items-center justify-center text-gray-400 text-sm">Photograph</div>
                    <input type="file" name="photo" accept="image/*" class="w-full text-xs mt-1">
                </div>
            </div>
            <div class="space-y-2 border-b pb-4">
                <div><label class="text-sm">Address:</label><textarea name="address" rows="2" class="w-full p-1 border rounded text-sm"></textarea></div>
                <div class="grid grid-cols-2 gap-4">
                    <div><label class="required text-sm">Aadhaar No.:</label><input type="text" name="aadhaar" class="w-full p-1 border rounded text-sm" required></div>
                    <div><label class="text-sm">Religion & Caste:</label><input type="text" name="religionCaste" class="w-full p-1 border rounded text-sm"></div>
                </div>
                <div class="grid grid-cols-3 gap-4">
                    <div><label class="text-sm">Blood Group:</label><input type="text" name="bloodGroup" class="w-full p-1 border rounded text-sm"></div>
                    <div>
                        <label class="text-sm">Nature of Work:</label>
                        <select name="workType" class="w-full p-1 border rounded text-sm">
                            <option value="">Select Work Type</option>
                            <option value="Mason">Mason</option>
                            <option value="Plumber">Plumber</option>
                            <option value="Welder">Welder</option>
                            <option value="Glazier">Glazier</option>
                            <option value="Plasterer">Plasterer</option>
                            <option value="Electrician">Electrician</option>
                            <option value="Carpenter">Carpenter</option>
                            <option value="Helper">Helper</option>
                            <option value="Aluminium Fabricator">Aluminium Fabricator</option>
                            <option value="Bar Benders">Bar Benders</option>
                            <option value="Brick Exchange">Brick Exchange</option>
                            <option value="Brick Moulder Semi skilled">Brick Moulder Semi skilled</option>
                            <option value="Bricks Carrying">Bricks Carrying</option>
                            <option value="Cement Work">Cement Work</option>
                            <option value="Centring">Centring</option>
                            <option value="Civil">Civil</option>
                            <option value="Colour Washer - Semi skilled">Colour Washer - Semi skilled</option>
                            <option value="Construction work">Construction work</option>
                            <option value="Crane Driver">Crane Driver</option>
                            <option value="Engine Driver">Engine Driver</option>
                            <option value="Fitter">Fitter</option>
                            <option value="Floor Polisher">Floor Polisher</option>
                            <option value="Foreman">Foreman</option>
                            <option value="Gang man-Semi skilled">Gang man-Semi skilled</option>
                            <option value="Gas or Electric Welder">Gas or Electric Welder</option>
                            <option value="Fammer Men - Semi skilled">Fammer Men - Semi skilled</option>
                            <option value="Helper to Carpenter Semi skilled">Helper to Carpenter Semi skilled</option>
                            <option value="Helper to Fitter-Semi skilled">Helper to Fitter-Semi skilled</option>
                            <option value="Lapour Work">Lapour Work</option>
                            <option value="Lift Attender Semi skilled">Lift Attender Semi skilled</option>
                            <option value="Limestone Burner Semi Skillen">Limestone Burner Semi Skillen</option>
                            <option value="Clerk Grade 1 - Semi skil">Clerk Grade 1 - Semi skil</option>
                            <option value="Mason and Brickler Class II">Mason and Brickler Class II</option>
                            <option value="Mason or Brick Layer Class 1">Mason or Brick Layer Class 1</option>
                            <option value="Mess Man-Semi skilled">Mess Man-Semi skilled</option>
                            <option value="Painter">Painter</option>
                            <option value="Pneumatic Driller">Pneumatic Driller</option>
                            <option value="Polisher">Polisher</option>
                            <option value="Riveler">Riveler</option>
                            <option value="ROAD CONSTRUCTION WORKER">ROAD CONSTRUCTION WORKER</option>
                            <option value="Road Roller Driver">Road Roller Driver</option>
                            <option value="Sand Mining">Sand Mining</option>
                            <option value="Stone Cristler">Stone Cristler</option>
                            <option value="Stone Crusher">Stone Crusher</option>
                            <option value="Stone Cutting">Stone Cutting</option>
                            <option value="Stone Dressing Work">Stone Dressing Work</option>
                            <option value="Stone Polisher">Stone Polisher</option>
                        </select>
                    </div>
                    <div><label class="text-sm">Experience (Years):</label><input type="number" name="experience" class="w-full p-1 border rounded text-sm"></div>
                </div>
            </div>
            <div class="text-sm"><label>Documents Submitted:</label><div class="flex space-x-4 mt-1"><label><input type="checkbox" name="docs" value="Aadhaar">Aadhaar</label><label><input type="checkbox" name="docs" value="Labour">Labour Card</label><label><input type="checkbox" name="docs" value="Bank">Bank Passbook</label><label><input type="checkbox" name="docs" value="Voter">Voter ID</label></div></div>
            <div class="text-right mt-6"><button type="submit" class="bg-green-600 text-white px-8 py-2 rounded">Submit Application</button></div>
        </form>
    </template>

    <template id="id-card-design-template">
        <div class="bg-[#f37e20] h-[45%] w-full absolute top-0 left-0 p-2 text-black">
            <p class="text-right text-xs font-bold">Reg.No : ALC5/TU/P61001197/2023-24</p>
            <h2 class="text-center font-bold text-lg leading-tight mt-1">ಹನಗಂಡಿ ಕಟ್ಟಡ ಮತ್ತು ಇತರೆ ನಿರ್ಮಾಣ ಕಾರ್ಮಿಕರ ಸಂಘ (ರಿ)</h2>
        </div>
        <div class="bg-gray-800 text-white text-center text-xs py-1 absolute top-[45%] w-full">
            <p>ಪಕಾಲಿ ಗಲ್ಲೀ, ಪಂಚಾಯತ ಹತ್ತಿರ ಹನಗಂಡಿ 587315</p>
            <p>ತಾ: ರಬಕವಿ ಬನಹಟ್ಟಿ ಜಿ: ಬಾಗಲಕೋಟೆ</p>
        </div>
        <div class="absolute top-[30%] left-4 bg-white p-1 rounded-lg shadow-md">
            <img src="{{PHOTO}}" class="w-20 h-24 object-cover">
        </div>
        <p class="absolute top-[62%] left-4 font-bold text-sm">IDENTITY CARD</p>
        <div class="absolute top-[58%] right-4 text-xs w-1/2">
            <p><strong>ID:</strong> {{MEMBER_ID}}</p>
            <p><strong>Name:</strong> {{NAME}}</p>
            <p><strong>Work:</strong> {{WORK}}</p>
            <p><strong>Mobile:</strong> {{MOBILE}}</p>
            <p><strong>Valid Till:</strong> {{VALIDTILL}}</p>
        </div>
        <p class="absolute bottom-10 right-4 text-blue-800 text-sm">ಅಧ್ಯಕ್ಷರ ಸಹಿ</p>
        <div class="bg-[#f37e20] h-[12%] w-full absolute bottom-0 left-0 flex items-center justify-center">
            <p class="text-black text-xs font-semibold">ಸಂಪರ್ಕಿಸಿ: 9900628695, 9008324784, 8147916816, 9742611065</p>
        </div>
    </template>
</body>
</html>